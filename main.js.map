{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/service/index.ts","webpack:///./src/service/commands.ts","webpack:///./src/service/constants.ts","webpack:///./src/service/packets.ts","webpack:///./src/components/SensorConsole/index.scss","webpack:///./src/components/SensorConsole/FormattedPM25.scss","webpack:///./src/actions/sensor.ts","webpack:///./src/reducers/sensor.ts","webpack:///./src/reducers/report.ts","webpack:///./src/configureStore.ts","webpack:///./src/components/SensorConsole/FormattedPM25.tsx","webpack:///./src/components/SensorConsole/MeasurementInterval.tsx","webpack:///./src/components/SensorConsole/index.tsx","webpack:///./src/Entry.tsx","webpack:///./src/reducers/index.ts","webpack:///./src/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","SensorService","device","this","events","handleValueChanged","event","target","emitBlock","Buffer","from","buffer","addEventListener","emit","navigator","bluetooth","requestDevice","filters","services","optionalServices","_a","server","gatt","connect","undefined","service","getPrimaryService","characteristic","getCharacteristic","startNotifications","_b","stopNotifications","disconnect","_c","removeAllListeners","block","writeValue","listener","on","off","packet","shutdown","makePacket","setMeasurementInterval","interval","of","setTime","now","Date","values","alloc","writeUInt32BE","Math","trunc","getTime","setMeasurementEnable","enabled","type","header","payload","concat","checksum","reduce","prev","curr","RX_SERVICE_UUID","RX_CHAR_UUID","TX_CHAR_UUID","ShutdownPacket","assert","NoMoreHistoryPacket","HistoryPacket","pm25","readUInt16BE","recordDate","readUInt32BE","BatteryPacket","capacity","readUInt8","isCharging","freeze","seal","RuntimePacket","runtime","boottime","SensorPacket","currentDate","MeasurementSetupPacket","VersionPacket","minor","major","baseline","Error","next","mapping","aa01","aa0a","aa0b00","aa5004","aa5005","aa5006","aa5007","aa5400","readPacket","toString","createAsync","setConnected","updatePacket","async","params","dispatch","getState","sensor","console","log","toUpperCase","sendCommand","sendMessage","case","done","state","connected","shuttingdown","latest","history","historyFully","draft","batteryCapacity","batteryCharging","measurementInterval","measurementIntervalEnabled","runTime","bootTime","version","composeEnhancers","createElement","level","getLevel","className","replace","Level","Excellent","Good","LightlyPolluted","ModeratelyPolluted","HeavilyPolluted","SeverelyPolluted","steps","MeasurementInterval","useRef","open","setOpen","useState","report","onToggle","onChange","Fragment","onClick","Modal","placement","isOpen","toggle","ModalHeader","ModalBody","ListGroup","map","step","ListGroupItem","active","ModalFooter","Button","color","hidden","_d","_e","Container","container","Row","ButtonGroup","disabled","Table","table","responsive","borderless","field","Progress","toLocaleString","join","store","router","Entry","exact","path","component","document","body","appendChild","render"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([69,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { EventEmitter } from 'events';\nimport { RX_SERVICE_UUID, RX_CHAR_UUID, TX_CHAR_UUID } from './constants';\nimport { readPacket } from './packets';\nimport * as Commands_1 from './commands';\nexport { Commands_1 as Commands };\nexport * from './packets';\nconst DISCONNECTED = 'gattserverdisconnected';\nconst VALUE_CHANGED = 'characteristicvaluechanged';\nexport class SensorService {\n    constructor(device) {\n        this.events = new EventEmitter();\n        this.handleValueChanged = (event) => {\n            const target = event.target;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.emitBlock(Buffer.from(target.value.buffer));\n        };\n        this.device = device;\n        device.addEventListener(DISCONNECTED, () => {\n            this.events.emit(\"disconnected\" /* disconnected */);\n        });\n    }\n    static async requestDevice() {\n        const device = await navigator.bluetooth.requestDevice({\n            filters: [{ services: [0x7676] }],\n            optionalServices: [RX_SERVICE_UUID],\n        });\n        return new SensorService(device);\n    }\n    async connect() {\n        var _a;\n        this.server = await ((_a = this.device.gatt) === null || _a === void 0 ? void 0 : _a.connect());\n        if (this.server === undefined) {\n            return;\n        }\n        const service = await this.server.getPrimaryService(RX_SERVICE_UUID);\n        const characteristic = await service.getCharacteristic(TX_CHAR_UUID);\n        characteristic.addEventListener(VALUE_CHANGED, this.handleValueChanged);\n        await characteristic.startNotifications();\n    }\n    async disconnect() {\n        var _a, _b;\n        try {\n            await ((_a = this.characteristic) === null || _a === void 0 ? void 0 : _a.stopNotifications());\n            (_b = this.device.gatt) === null || _b === void 0 ? void 0 : _b.disconnect();\n        }\n        catch (_c) {\n            // ignore\n        }\n        this.events.emit(\"disconnected\" /* disconnected */);\n        this.events.removeAllListeners();\n    }\n    async sendCommand(block) {\n        var _a;\n        const service = await ((_a = this.server) === null || _a === void 0 ? void 0 : _a.getPrimaryService(RX_SERVICE_UUID));\n        if (service === undefined) {\n            return;\n        }\n        const characteristic = await service.getCharacteristic(RX_CHAR_UUID);\n        await characteristic.writeValue(block);\n    }\n    on(event, listener) {\n        this.events.on(event, listener);\n        return () => {\n            this.events.off(event, listener);\n        };\n    }\n    emitBlock(block) {\n        try {\n            const packet = readPacket(block);\n            if (packet === undefined) {\n                this.events.emit(\"failed\" /* failed */, block);\n            }\n            else {\n                this.events.emit(\"packet\" /* packet */, packet);\n            }\n        }\n        catch (_a) {\n            this.events.emit(\"failed\" /* failed */, block);\n        }\n    }\n}\n","export function shutdown() {\n    return makePacket(0x01);\n}\nexport function setMeasurementInterval(interval) {\n    return makePacket(0x08, Buffer.of(0x00, interval));\n}\nexport function setTime(now = new Date()) {\n    const values = Buffer.alloc(4);\n    values.writeUInt32BE(Math.trunc(now.getTime() / 1000));\n    return makePacket(0x09, values);\n}\nexport function readHistory() {\n    return makePacket(0x0a);\n}\nexport function nextHistory() {\n    return makePacket(0x0b);\n}\nexport function setMeasurementEnable(enabled) {\n    return makePacket(0x16, Buffer.of(enabled ? 0x01 : 0x00));\n}\nfunction makePacket(type, values = Buffer.of()) {\n    const header = Buffer.of(0xaa, type);\n    const payload = Buffer.concat([header, values]);\n    const checksum = payload.reduce((prev, curr) => prev + curr, 0);\n    return Buffer.of(...payload, checksum);\n}\n","export const RX_SERVICE_UUID = '6e400001-b5a3-f393-e0a9-e50e24dcca9e';\nexport const RX_CHAR_UUID = '6e400002-b5a3-f393-e0a9-e50e24dcca9e';\nexport const TX_CHAR_UUID = '6e400003-b5a3-f393-e0a9-e50e24dcca9e';\n","export class ShutdownPacket {\n    constructor(data) {\n        assert(data, 0x01);\n    }\n    toString() {\n        return 'Shutdown';\n    }\n}\nexport class NoMoreHistoryPacket {\n    constructor(data) {\n        assert(data, 0x0a);\n    }\n    toString() {\n        return 'No More History';\n    }\n}\nexport class HistoryPacket {\n    constructor(data) {\n        assert(data, 0x0b, 0xb5);\n        this.pm25 = data.readUInt16BE(0x3);\n        this.recordDate = new Date(data.readUInt32BE(0x7) * 1000);\n    }\n    toString() {\n        return `PM 2.5: ${this.pm25}`;\n    }\n}\nexport class BatteryPacket {\n    constructor(data) {\n        assert(data, 0x50, 0xfe);\n        this.capacity = data.readUInt8(0x3);\n        this.isCharging = data.readUInt8(0x6) === 1;\n        Object.freeze(this);\n        Object.seal(this);\n    }\n    toString() {\n        if (this.isCharging) {\n            return 'Charging';\n        }\n        return `Battery: ${this.capacity}%`;\n    }\n}\nexport class RuntimePacket {\n    constructor(data) {\n        assert(data, 0x50);\n        this.runtime = data.readUInt32BE(0x3);\n        this.boottime = data.readUInt32BE(0x7);\n        Object.freeze(this);\n        Object.seal(this);\n    }\n    toString() {\n        return `Run time: ${this.runtime} sec, Boot time: ${this.boottime} sec`;\n    }\n}\nexport class SensorPacket {\n    constructor(data) {\n        assert(data, 0x50);\n        this.pm25 = data.readUInt16BE(0x3);\n        this.recordDate = new Date(data.readUInt32BE(0x7) * 1000);\n        this.currentDate = new Date(data.readUInt32BE(0xc) * 1000);\n        Object.freeze(this);\n        Object.seal(this);\n    }\n    toString() {\n        return `PM 2.5: ${this.pm25}`;\n    }\n}\nexport class MeasurementSetupPacket {\n    constructor(data) {\n        assert(data, 0x50, 0x01);\n        this.interval = data.readUInt16BE(0x3);\n        this.enabled = data.readUInt8(0x5) !== 0;\n        Object.freeze(this);\n        Object.seal(this);\n    }\n    toString() {\n        if (!this.enabled) {\n            return 'Interval measurement disabled';\n        }\n        return `Internal: ${this.interval} minutes`;\n    }\n}\nexport class VersionPacket {\n    constructor(data) {\n        assert(data, 0x54);\n        this.minor = data.readUInt16BE(0x2);\n        this.major = data.readUInt16BE(0x4);\n        Object.freeze(this);\n        Object.seal(this);\n    }\n    toString() {\n        return `${this.major}.${this.minor}`;\n    }\n}\nfunction assert(data, type, baseline) {\n    if (data[0] !== 0xaa) {\n        throw new Error('unexpected header');\n    }\n    else if (data[1] !== type) {\n        throw new Error('unexpected type');\n    }\n    else if (baseline !== undefined) {\n        const expected = data[data.length - 1];\n        const actual = data.slice(0x3, data.length - 1).reduce((prev, next) => prev + next, baseline) & 255;\n        if (expected !== actual) {\n            throw new Error('checksum failed');\n        }\n    }\n}\nconst mapping = {\n    aa01: ShutdownPacket,\n    aa0a: NoMoreHistoryPacket,\n    aa0b00: HistoryPacket,\n    aa5004: BatteryPacket,\n    aa5005: RuntimePacket,\n    aa5006: SensorPacket,\n    aa5007: MeasurementSetupPacket,\n    aa5400: VersionPacket,\n};\nexport function readPacket(block) {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-expect-error\n    const Packet = mapping[block.slice(0, 3).toString('hex')] || mapping[block.slice(0, 2).toString('hex')];\n    return new Packet(block);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_3Q4jVp-XdRE9lL_y-DHvqZ\",\"table\":\"_12l9Lp-US87GiC9o0PbHWo\",\"field\":\"_1BDqlaGx2FzEtv1WMIea58\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"excellent\":\"_1MN1iQ__lDcfDATezKh6gq\",\"good\":\"_2iF4fs9zFDhmn9gwKtuKZy\",\"lightly-polluted\":\"IXUN-3jdHZPyDpVihuQSU\",\"moderately-polluted\":\"_2JxHIf0Kw8tOb67KCYrrmO\",\"heavily-polluted\":\"_2tXPdGxFj1gNC4vHrkw8sx\",\"severely-polluted\":\"_4X8048EGadeXADBH2Wpyh\"};","import actionCreatorFactory from 'typescript-fsa';\nimport { asyncFactory } from 'typescript-fsa-redux-thunk';\nimport { SensorService } from '../service';\nimport * as Commands from '../service/commands';\nconst create = actionCreatorFactory('SENSOR');\nconst createAsync = asyncFactory(create);\nexport const setConnected = create('SET_CONNECTED');\nexport const updatePacket = create('UPDATE_PACKET');\nexport const requestDevice = createAsync('REQUEST_DEVICE', async () => {\n    return SensorService.requestDevice();\n});\nexport const connect = createAsync('CONNECT', async (params, dispatch, getState) => {\n    const { sensor } = getState();\n    if (sensor === null) {\n        return;\n    }\n    await sensor.connect();\n    dispatch(setConnected(true));\n    sensor.on('disconnected', () => dispatch(setConnected(false)));\n    sensor.on('packet', (packet) => dispatch(updatePacket(packet)));\n    sensor.on('failed', (packet) => {\n        console.log('Block', packet.toString('hex').toUpperCase());\n    });\n    await sensor.sendCommand(Commands.setTime());\n});\nexport const disconnect = createAsync('DISCONNECT', async (params, dispatch, getState) => {\n    const { sensor } = getState();\n    return sensor === null || sensor === void 0 ? void 0 : sensor.disconnect();\n});\nconst sendMessage = createAsync('SEND_MESSAGE', async (payload, dispatch, getState) => {\n    const { sensor } = getState();\n    return sensor === null || sensor === void 0 ? void 0 : sensor.sendCommand(payload);\n});\nexport const setMeasurementEnable = (enabled) => sendMessage(Commands.setMeasurementEnable(enabled));\nexport const setMeasurementInterval = (value) => sendMessage(Commands.setMeasurementInterval(value));\nexport const shutdown = () => sendMessage(Commands.shutdown());\n","import { reducerWithInitialState } from 'typescript-fsa-reducers';\nimport { requestDevice } from '../actions/sensor';\n// prettier-ignore\nexport default reducerWithInitialState(null)\n    .case(requestDevice.async.done, (state, payload) => payload.result);\n","import { produce } from 'immer';\nimport { reducerWithInitialState } from 'typescript-fsa-reducers';\nimport { setConnected, updatePacket } from '../actions/sensor';\nimport { BatteryPacket, HistoryPacket, MeasurementSetupPacket, NoMoreHistoryPacket, RuntimePacket, SensorPacket, ShutdownPacket, VersionPacket, } from '../service';\nconst defaultState = {\n    connected: false,\n    shuttingdown: false,\n    latest: {},\n    history: [],\n    historyFully: false,\n};\nexport default reducerWithInitialState(defaultState)\n    .case(setConnected, (state, connected) => produce(state, (draft) => {\n    if (!connected) {\n        draft.shuttingdown = false;\n        draft.latest = {};\n    }\n    draft.connected = connected;\n}))\n    .case(updatePacket, (state, packet) => produce(state, (draft) => {\n    draft.shuttingdown = false;\n    if (packet instanceof BatteryPacket) {\n        draft.latest.batteryCapacity = packet.capacity;\n        draft.latest.batteryCharging = packet.isCharging;\n    }\n    else if (packet instanceof MeasurementSetupPacket) {\n        draft.latest.measurementInterval = packet.interval;\n        draft.latest.measurementIntervalEnabled = packet.enabled;\n    }\n    else if (packet instanceof RuntimePacket) {\n        draft.latest.runTime = packet.runtime;\n        draft.latest.bootTime = packet.boottime;\n    }\n    else if (packet instanceof SensorPacket) {\n        draft.latest.pm25 = packet.pm25;\n        draft.latest.recordDate = packet.recordDate;\n    }\n    else if (packet instanceof VersionPacket) {\n        draft.latest.version = [packet.major, packet.minor];\n    }\n    else if (packet instanceof ShutdownPacket) {\n        draft.shuttingdown = true;\n    }\n    else if (packet instanceof HistoryPacket) {\n        draft.history.push({\n            pm25: packet.pm25,\n            recordDate: packet.recordDate,\n        });\n    }\n    else if (packet instanceof NoMoreHistoryPacket) {\n        draft.historyFully = true;\n    }\n}));\n","var _a;\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { createMemoryHistory } from 'history';\nimport { routerMiddleware } from 'connected-react-router';\nimport { createRootReducer } from './reducers';\nexport const history = createMemoryHistory();\n// prettier-ignore\nconst composeEnhancers = process.env.NODE_ENV === 'production'\n    ? compose\n    : (_a = Reflect.get(window, '__REDUX_DEVTOOLS_EXTENSION_COMPOSE__')) !== null && _a !== void 0 ? _a : compose;\nexport const configureStore = () => createStore(createRootReducer(history), undefined, composeEnhancers(applyMiddleware(routerMiddleware(history), // connected-react-router\nthunk)));\n","import React from 'react';\nimport locals from './FormattedPM25.scss';\nexport const FormattedPM25 = ({ value }) => {\n    if (value === undefined) {\n        return React.createElement(\"span\", null, \"N/A\");\n    }\n    const level = getLevel(value);\n    return (React.createElement(\"span\", null,\n        React.createElement(\"span\", null,\n            value,\n            \" \\u03BCg/m\",\n            React.createElement(\"sup\", null, \"3\")),\n        React.createElement(\"span\", { className: locals[level] },\n            \" (\",\n            level.replace(/-/g, ' '),\n            \")\")));\n};\nvar Level;\n(function (Level) {\n    Level[\"Excellent\"] = \"excellent\";\n    Level[\"Good\"] = \"good\";\n    Level[\"LightlyPolluted\"] = \"lightly-polluted\";\n    Level[\"ModeratelyPolluted\"] = \"moderately-polluted\";\n    Level[\"HeavilyPolluted\"] = \"heavily-polluted\";\n    Level[\"SeverelyPolluted\"] = \"severely-polluted\";\n})(Level || (Level = {}));\nconst getLevel = (value) => {\n    if (value <= 35) {\n        return Level.Excellent;\n    }\n    else if (value <= 75) {\n        return Level.Good;\n    }\n    else if (value <= 115) {\n        return Level.LightlyPolluted;\n    }\n    else if (value <= 150) {\n        return Level.ModeratelyPolluted;\n    }\n    else if (value <= 250) {\n        return Level.HeavilyPolluted;\n    }\n    else {\n        return Level.SeverelyPolluted;\n    }\n};\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader, ListGroup, ListGroupItem } from 'reactstrap';\nimport { setMeasurementEnable, setMeasurementInterval } from '../../actions/sensor';\nconst steps = [5, 10, 15, 30, 60, 90, 120];\nexport const MeasurementInterval = () => {\n    const target = React.useRef(null);\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const connected = useSelector((state) => state.report.connected);\n    const interval = useSelector((state) => state.report.latest.measurementInterval);\n    const enabled = useSelector((state) => state.report.latest.measurementIntervalEnabled);\n    const onToggle = () => setOpen(connected && !open);\n    const onChange = async (value) => {\n        setOpen(false);\n        await dispatch(setMeasurementInterval(value));\n        await dispatch(setMeasurementEnable(true));\n    };\n    const onDisable = async () => {\n        setOpen(false);\n        dispatch(setMeasurementEnable(false));\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"span\", { onClick: onToggle }, enabled ? `${interval} minutes` : 'Disabled'),\n        React.createElement(Modal, { placement: 'bottom', isOpen: open, target: target, toggle: onToggle },\n            React.createElement(ModalHeader, null, \"Measurement interval\"),\n            React.createElement(ModalBody, null,\n                React.createElement(\"p\", null,\n                    \"Current Interval: \",\n                    interval,\n                    \" minutes\"),\n                React.createElement(ListGroup, null, steps.map((step) => (React.createElement(ListGroupItem, { onClick: () => onChange(step), key: step, active: step === interval },\n                    step,\n                    \" minutes\"))))),\n            React.createElement(ModalFooter, null,\n                React.createElement(Button, { color: 'primary', onClick: onDisable, hidden: !enabled }, \"Disable\"),\n                React.createElement(Button, { color: 'secondary', onClick: onToggle }, \"Cancel\")))));\n};\n","import prettyDuration from 'pretty-ms';\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button, ButtonGroup, Container, Progress, Row, Table } from 'reactstrap';\nimport { connect, disconnect, requestDevice, shutdown } from '../../actions/sensor';\nimport locals from './index.scss';\nimport { FormattedPM25 } from './FormattedPM25';\nimport { MeasurementInterval } from './MeasurementInterval';\nexport const SensorConsole = () => {\n    var _a, _b, _c, _d, _e;\n    const dispatch = useDispatch();\n    const connected = useSelector((state) => state.report.connected);\n    const shuttingdown = useSelector((state) => state.report.shuttingdown);\n    const latest = useSelector((state) => state.report.latest);\n    const onConnect = async () => {\n        if (connected) {\n            await dispatch(disconnect());\n        }\n        else {\n            await dispatch(requestDevice());\n            await dispatch(connect());\n        }\n    };\n    const onShutdown = () => dispatch(shutdown());\n    return (React.createElement(Container, { className: locals.container },\n        React.createElement(Row, null,\n            React.createElement(ButtonGroup, null,\n                React.createElement(Button, { color: connected ? 'success' : 'primary', onClick: onConnect }, connected ? 'Disconnect' : 'Connect'),\n                React.createElement(Button, { color: connected ? 'danger' : undefined, onClick: onShutdown, disabled: !connected }, shuttingdown ? 'Shutting down' : 'Shutdown'))),\n        React.createElement(Row, null,\n            React.createElement(Table, { className: locals.table, responsive: true, borderless: true },\n                React.createElement(\"thead\", null,\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"th\", { className: locals.field }, \"#\"),\n                        React.createElement(\"th\", null, \"Value\"))),\n                React.createElement(\"tbody\", null,\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null,\n                            \"PM \",\n                            React.createElement(\"sub\", null, \"2.5\")),\n                        React.createElement(\"td\", { className: 'text-monospace' },\n                            React.createElement(FormattedPM25, { value: latest.pm25 }))),\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null, \"Battery\"),\n                        React.createElement(\"td\", null,\n                            React.createElement(Progress, { value: (_a = latest.batteryCapacity) !== null && _a !== void 0 ? _a : 0 },\n                                latest.batteryCapacity ? `${latest.batteryCapacity}%` : 'N/A',\n                                \" \",\n                                latest.batteryCharging ? '(Charging)' : '(Discharge)'))),\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null, \"Record date\"),\n                        React.createElement(\"td\", { className: 'text-monospace' }, (_c = (_b = latest.recordDate) === null || _b === void 0 ? void 0 : _b.toLocaleString()) !== null && _c !== void 0 ? _c : 'N/A')),\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null, \"Runtime\"),\n                        React.createElement(\"td\", { className: 'text-monospace' }, latest.runTime ? prettyDuration(latest.runTime * 1000) : 'N/A')),\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null, \"Boot time\"),\n                        React.createElement(\"td\", { className: 'text-monospace' }, latest.bootTime ? prettyDuration(latest.bootTime * 1000) : 'N/A')),\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null, \"Measurement Interval\"),\n                        React.createElement(\"td\", { className: 'text-monospace' },\n                            React.createElement(MeasurementInterval, null))),\n                    React.createElement(\"tr\", null,\n                        React.createElement(\"td\", null, \"Firmare version\"),\n                        React.createElement(\"td\", { className: 'text-monospace' }, (_e = (_d = latest.version) === null || _d === void 0 ? void 0 : _d.join('.')) !== null && _e !== void 0 ? _e : 'N/A')))))));\n};\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { Route, Switch } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { configureStore, history } from './configureStore';\nimport { SensorConsole } from './components/SensorConsole';\nconst store = configureStore();\nexport const Entry = () => (React.createElement(Provider, { store: store },\n    React.createElement(ConnectedRouter, { history: history },\n        React.createElement(Switch, null,\n            React.createElement(Route, { exact: true, path: '/', component: SensorConsole })))));\n","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\nimport sensor from './sensor';\nimport report from './report';\nexport const createRootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    sensor,\n    report,\n});\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport ready from 'domready';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Entry } from './Entry';\nready(() => {\n    const container = document.createElement('main');\n    document.body = document.createElement('body');\n    document.body.appendChild(container);\n    ReactDOM.render(React.createElement(Entry), container);\n});\n"],"sourceRoot":""}